# YLAI-AUTO-PLATFORM Backend 环境变量配置模板
# 复制此文件为 .env（开发环境）或 .env.production（生产环境）

# ==================== 基础配置 ====================
ENV=development
# 可选值: development, staging, production

# 应用服务配置
APP_NAME=YLAI-AUTO-PLATFORM
APP_VERSION=1.0.0
API_HOST=127.0.0.1
API_PORT=8001
API_WORKERS=4
# 生产环境建议: workers = CPU核心数 * 2 + 1

# ==================== 数据库配置 ====================
# SQLite (开发环境默认)
DATABASE_URL=sqlite:///./data/app.db

# PostgreSQL (生产环境推荐)
# DATABASE_URL=postgresql://user:password@localhost/ylai_db
# DATABASE_POOL_SIZE=20
# DATABASE_MAX_OVERFLOW=10

# MySQL
# DATABASE_URL=mysql+aiomysql://user:password@localhost/ylai_db

# ==================== 缓存与消息队列 ====================
REDIS_URL=redis://127.0.0.1:6379/0
REDIS_PASSWORD=
REDIS_DB=0
# 生产环境推荐配置集群模式或哨兵模式

# RabbitMQ (可选)
RABBITMQ_URL=amqp://guest:guest@127.0.0.1:5672/

# ==================== 日志配置 ====================
LOG_LEVEL=INFO
# 可选值: DEBUG, INFO, WARNING, ERROR, CRITICAL

LOG_FORMAT=json
# 可选值: json, text

LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_BYTES=10485760
# 10MB，单位：字节

LOG_FILE_BACKUP_COUNT=5
# 保留的日志文件数量

LOG_ROTATION_WHEN=midnight
# 可选值: S, M, H, D, midnight, W0-W6

# ==================== 监控与性能 ====================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# 性能基准测试
BENCHMARK_ENABLED=false
BENCHMARK_INTERVAL=3600
# 单位：秒

# ==================== 安全配置 ====================
SECRET_KEY=your-secret-key-change-in-production
ALGORITHM=HS256
TOKENIZE_EXPIRE_MINUTES=60

# CORS 配置
CORS_ORIGINS=["http://localhost:3000","http://127.0.0.1","http://ylai.local"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","PATCH","OPTIONS"]
CORS_ALLOW_HEADERS=["Content-Type","Authorization"]

# API 速率限制
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60
# 每 60 秒最多 100 个请求

# ==================== AI 模型配置 ====================
OLLAMA_BASE_URL=http://127.0.0.1:11434
OLLAMA_MODELS=qwen3:8b,llama3.1:8b,deepseek-r1:8b

# 向量数据库
VECTOR_DB_TYPE=weaviate
# 可选值: weaviate, pinecone, milvus, faiss

VECTOR_DB_URL=http://127.0.0.1:8080

# ==================== 外部服务集成 ====================
# Sentry 错误追踪
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# SendGrid 邮件服务
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@ylai.local

# 云存储（AWS S3）
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_BUCKET_NAME=ylai-storage

# ==================== 爬虫与自动化 ====================
CRAWLER_TIMEOUT=30
CRAWLER_RETRIES=3
CRAWLER_USER_AGENT=Mozilla/5.0 (compatible; YLAI-AUTO)

# 任务队列
TASK_QUEUE_ENABLED=true
TASK_QUEUE_MAX_WORKERS=10
TASK_QUEUE_TIMEOUT=3600
# 单位：秒

# ==================== 健康检查与启动验证 ====================
HEALTH_CHECK_FULL_INTERVAL=60
# 完整健康检查间隔（秒）

STARTUP_CHECK_TIMEOUT=30
# 启动时健康检查超时（秒）

# 启动前检查项
CHECK_DATABASE=true
CHECK_REDIS=true
CHECK_OLLAMA=false
# 如果模型未部署可设为 false

# ==================== 开发工具 ====================
# 热重载（开发环境）
RELOAD=true

# API 文档
API_DOCS_ENABLED=true
API_DOCS_PATH=/docs

# 调试模式
DEBUG=false
# 生产环境禁用！

# CORS 预检请求检查
DEBUG_CORS=false

# ==================== 备份与灾难恢复 ====================
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400
# 单位：秒，默认每天一次

BACKUP_RETENTION_DAYS=30
# 保留最近 30 天的备份

BACKUP_DESTINATION=./backups
# 本地备份路径或 S3 URI

# ==================== 功能开关 ====================
FEATURE_AI_OPTIMIZATION=true
FEATURE_VISUAL_PIPELINE=true
FEATURE_RBAC=true
FEATURE_PWA=false
# PWA 功能当前禁用

FEATURE_REAL_TIME_MONITORING=true
FEATURE_AUTO_SCALING=false
